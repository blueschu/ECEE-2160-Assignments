% ECEE 2160 Lab Report Header
%
% Copyright (c) 2020 Brian Schubert
% 
% This header file was created to format lab reports in my
% Embedded Design course taken Northeastern University during
% the Summer 2 2020 semester.
%
%

% Many packages are retained from previous lab report headers
% for future convenience. 
\usepackage{amsmath,amsfonts,amssymb,amsthm}
\usepackage[english]{babel}
\usepackage{caption}
\usepackage[makeroom]{cancel}
\usepackage[dvipsnames,table]{xcolor}
\usepackage{enumitem}
\usepackage{esint}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage[utf8]{inputenc}
\usepackage{listings} % For code listings
% Replace times with this package to typeset math in times aswell
% Note: no bold typeface exists for the times font, so \boldsymbol
% does not work when using a times font in math mode.
%\usepackage{mathptmx}
\usepackage{mathtools}
\usepackage{multirow}
\usepackage{pgfplots}
\usepackage{placeins} % For FloatBarrier
\usepackage{siunitx}
\usepackage{subcaption}
\usepackage{tikz}
\usepackage[american]{circuitikz}
\usepackage{todonotes}
\usepackage{times} % For times font
\usepackage[explicit]{titlesec}

% Use deja-vu sans mono for monospaced typeface
% Must be after times font package.
\usepackage[scaled=0.9]{DejaVuSansMono}

\geometry{left=1in,right=1in,top=1in,bottom=1in}

% File prefixes to use when searching for graphics.
\graphicspath{ {../images/} {./images/} }

% Color all used links blue.
\hypersetup{
    colorlinks=true,
    linkcolor=MidnightBlue,   
    citecolor=MidnightBlue,   
    urlcolor=MidnightBlue,
}

\urlstyle{same} % Print URLs using the surroudning font instead of forcing monospace

% Macro to generate the an IPL template style title page
\newcommand{\makelabtitle}{
\begin{titlepage}
    \begin{center}
    \renewcommand{\baselinestretch}{1.5}
    
    \includegraphics[width=\textwidth]{northeastern-header}\par
    
    \vspace{0.4in}

    {\Large
        \LABcourse\par
        \LABcoursetitle\par
        \LABsemester\par
    }

    \vspace{0.4in}

    {\LARGE\bfseries
        Report for Lab Assignment \LABnumber\par
        \ifx \LABtitle \undefined
        \else
            \LABtitle\par
        \fi
    }
    
    \vspace{1.0in}
    
    {\Large \LABauthor\par
        \ifx \LABpartner \undefined
        \else
            \textbf{Lab Partner}: \LABpartner\\
        \fi
        \textbf{Instructor:} \LABinstructor\par
        \LABdate\par
     }
    \end{center}
    \vfill\null
    \section*{Abstract}
    \LABabstract
\end{titlepage}
}

\titleformat{\section}{\normalfont\bfseries}{\thesection}{1em}{\underline{#1}}

% Notation Definitions
\newcommand{\dd}[1]{\mathrm{d}#1}
\newcommand{\diffop}[2][]{\frac{\dd#1}{\dd #2}}
\newcommand{\pdiffop}[2][]{\frac{\partial #1}{\partial #2}}
\newcommand{\bvec}[1]{{\vec{\boldsymbol{#1}}}}
\newcommand{\relerr}[1]{\frac{\delta #1}{#1}}
\newcommand{\unitvec}[1]{\hat{\boldsymbol{#1}}}

\sisetup{inter-unit-product =\cdot}
\sisetup{per-mode = symbol}
\sisetup{separate-uncertainty = true}
\sisetup{multi-part-units=single}
\DeclareSIUnit{\radian}{rad}
\DeclareSIUnit{\degreeFahrenheit}{{}^\circ F}

% Use computer modern roman fontface for emf symbol.
% https://tex.stackexchange.com/questions/67881/resetting-mathcal-font-to-default
\DeclareMathAlphabet{\defaultmathcal}{OMS}{cmsy}{m}{n}
\newcommand{\emf}{\defaultmathcal{E}}



% Print table and figure labels in bold font
\captionsetup[table]{labelfont=bf}
\captionsetup[figure]{labelfont=bf}

%\captionsetup[lstlisting]{ format=listing, labelfont=white, textfont=white, singlelinecheck=false, margin=0pt, font={bf,footnotesize} }
\captionsetup[lstlisting]{labelfont=bf}

% Make table columns slighly wider by default
\setlength{\tabcolsep}{8pt}

% Custom code color scheme
\definecolor{codekeyword}{RGB}{3,0,130}
\definecolor{codeidentifier}{RGB}{20, 20, 80}
\definecolor{codestring}{RGB}{72, 140, 2}
\definecolor{codecomment}{rgb}{0.3,0.3,0.3}
\definecolor{codedirective}{RGB}{160, 130, 60}


% Custom listings styling
\lstdefinestyle{labreportstyle}{
    % Syntax highlighting
    basicstyle=\ttfamily\footnotesize,
    backgroundcolor=\color{white},
    commentstyle=\itshape\color{codecomment},
    keywordstyle=\bfseries\color{codekeyword},
    stringstyle=\bfseries\color{codestring},
    identifierstyle=\color{codeidentifier},
    % Tab width and display
    tabsize=4,
    showtabs=true,
    % Don't show spaces in strings
    showspaces=false,
    showstringspaces=false,
    % Show line numbers
    numbers=left,
    numberstyle=\scriptsize\sffamily\color{gray},
    % Allow listing to break long lines
    breaklines=true,
    breakatwhitespace=true,
    % Frame settings
    frame=lines,
    % Misc
    captionpos=t,
    keepspaces=true,
    %    numbersep=5pt,
}

% C++ specific styling
\lstdefinestyle{labreportstyle-C++}{
    language=C++,	% Not sure if redundant now, but was required at one point
    style=labreportstyle,
    directivestyle={\color{codedirective}},
    morekeywords={constexpr,nullptr}
}

% shell specific styling
\lstdefinestyle{labreportstyle-sh}{
    language=sh,
    style=labreportstyle,
    numbers=none,
    identifierstyle=\color{black},
    emph={\$},
    emphstyle=\bfseries\color{codekeyword},
}

% Conveience macro to load code file listings.
%
% Note that the style is automatically selected based on the language paramater.
\newcommand{\includecode}[2][C++]{%
    \lstinputlisting[caption={\texttt{#2}}, label={lst:#2}, language=#1, style=labreportstyle-#1]{#2}
}
